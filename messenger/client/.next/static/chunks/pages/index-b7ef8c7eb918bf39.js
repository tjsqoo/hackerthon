(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2285)}])},2285:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(5893),o=n(7294),c=n(7642),i=n(9008),a=n.n(i),r=n(5291),l=n.n(r);function u(){let[e,t]=(0,o.useState)(null),[n,i]=(0,o.useState)(""),[r,u]=(0,o.useState)([]),[m,_]=(0,o.useState)("general"),[d,h]=(0,o.useState)(""),p=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(e)return;let n="http://localhost:4000";console.log("Connecting to Socket.IO server:",n);let s=(0,c.ZP)(n);return t(s),s.on("connect",()=>{console.log("서버에 연결되었습니다:",s.id),x("[SERVER] 서버에 연결되었습니다.")}),s.on("chat_message",e=>{console.log("메시지 수신:",e),x(e)}),s.on("disconnect",()=>{console.log("서버와의 연결이 끊어졌습니다."),x("[SERVER] 서버와의 연결이 끊어졌습니다.")}),s.on("connect_error",e=>{console.error("연결 오류:",e.message),x("[SERVER] 연결 오류 발생: ".concat(e.message))}),()=>{s.connected&&(s.disconnect(),console.log("소켓 연결이 해제되었습니다."))}},[]);let x=e=>{u(t=>[...t,e]),setTimeout(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},0)},j=()=>{e&&""!==n.trim()&&""!==d&&(e.emit("chat_message",{room:d,text:n.trim()}),i(""))};return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"Next.js 채팅 클라이언트"}),(0,s.jsx)("meta",{name:"description",content:"Next.js Socket.IO 채팅"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)("h1",{className:l().title,children:"Next.js 채팅"}),(0,s.jsxs)("div",{className:l().description,children:[(0,s.jsx)("input",{type:"text",placeholder:"방 이름",value:m,onChange:e=>_(e.target.value),className:l().input}),(0,s.jsx)("button",{onClick:()=>{e&&""!==m.trim()&&(e.emit("join_room",m.trim()),h(m.trim()),x('[SERVER] 방 "'.concat(m.trim(),'"에 참여를 시도합니다.')))},className:l().button,children:"방 참여"})]}),(0,s.jsx)("div",{ref:p,className:l().chatContainer,children:r.map((e,t)=>(0,s.jsx)("p",{className:l().message,children:e},t))}),(0,s.jsxs)("div",{className:l().inputArea,children:[(0,s.jsx)("input",{type:"text",placeholder:"메시지 입력...",value:n,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"===e.key&&j()},disabled:!d,className:l().input}),(0,s.jsx)("button",{onClick:j,disabled:!d,className:l().button,children:"보내기"})]})]})]})}},5291:function(e){e.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",title:"Home_title__hYX6j",description:"Home_description__uXNdx",chatContainer:"Home_chatContainer__KzBAq",message:"Home_message__OKL2m",inputArea:"Home_inputArea__sYvm8",input:"Home_input__OGaGo",button:"Home_button__G93Ef"}}},function(e){e.O(0,[731,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);